component: scf
name: ap-guangzhou_default_Ckafka_SCF_COS
org: app
app: Ckafka_SCF_COS
stage: dev
inputs:
  name: Ckafka_SCF_COS
  src: ./
  description: >-
    This demo will connect Ckafca and consume message automatically. The SCF
    will write each message to txt by each line. Then SCF will name this file by
    time and upload this txt to COS bucket.
    本範例會根據觸發器配置的最大批次訊息數去觸發雲函數運作，雲函數每次運作都會創建一個以時間戳加随機數爲名字的文本文件，并把拉取到的 Ckafca
    訊息換行寫入文本文件。最後把寫好的文件上傳到 COS bucket，并以小時爲單位在 COS bucket 中創建文件夾。
  handler: Ckafka_SCF_COS.main_handler
  runtime: Python3.6
  namespace: default
  region: ap-guangzhou
  memorySize: 128
  timeout: 5
  events:
    - ckafka: # ckafka觸發器
        name: # input Ckafka  trigger name
        parameters:
          name: # input Ckafka Instance id        
          topic: # input Ckafka Topic name  
          maxMsgNum: 100
          offset: latest
          enable: true