component: scf
name: kafka_to_kafka_consumer
org: app
app: kafka_to_kafka_consumer
stage: dev
inputs:
  name: kafka_to_kafka_consumer
  src: ./
  description: CKAFKA data backup to another CKAFKA topic. CKAFKA數據轉存到另外一個CKAFKA topic。
  handler: kafka_to_kafka_consumer.main_handler
  runtime: Python2.7
  namespace: default
  region: ap-guangzhou
  memorySize: 128 # 根據需要設置，預設 128M
  timeout: 300 # 建議設置爲 300s，不建議設置時間太短，以免超時
  vpcConfig: # 如果連接目标 ckafka 不是走公網，需要配置 vpc 訊息，vpcId 和 subnetId 要跟 ckakfa 所在的 vpc 一緻
    vpcId: vpc-kdx2xxxx
    subnetId: subnet-a8x0xxxx
  environment:
    variables:
      kafka_address: 172.16.xx.xxx:9092 # 必填，目标 ckafka 網址
      kafka_topic_name: xxxx # 必填，需要轉存的目标 kafka topic 名稱

  events:
    - ckafka: # ckafka 觸發器
        name: # 觸發器名稱
        parameters:
          name: ckafka-8xo1xxxx # 來源 ckafka 實例 ID
          topic: source # 來源 ckakfa 的 topic 名稱
          maxMsgNum: 10000 # 最大批次訊息數，最大爲 10000
          offset: latest # 觸發器消費訊息的起始位置。支援三種配置：最新、最開始、按時間點。
          enable: true # 立即啓用（預設 true 即可）